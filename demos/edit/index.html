<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, maximum-scale=2.0" />
    <title></title>
    <script src="edit.js"></script>
    <link rel="stylesheet" type="text/css" href="edit.css">
</head>
<body>
<h2>html5 编辑器</h2>
<div id="edit_info">
    <div class="about">
        <div class="close" title="关闭" onclick="edit_info_close();"></div>
        <h2>about</h2>
        <p>about</p>
    </div>
</div>
<div id="edit_bar">
    <span onmousedown="edit_b()">B</span>
    <span onmousedown="edit_i()">I</span>
    <span onmousedown="edit_h1()">H1</span>
    <span onmousedown="edit_h2()">H2</span>
    <span>
        <input name="upload_pic" id="upload_pic" type="file" accept="image/*">
        <label for="upload_pic" class="upload_pic"></label>
    </span>
    <span class="info" onclick="edit_info_open();">
        
    </span>
</div>
<div class="edit">12345<b>67</b>89edit</div >
<script>

    window.onload=function(){
        wbEdit.edit(".edit",function(){

        });
        //
                document.getElementById("upload_pic").onchange=function(e){
            //获得图片标签
            var files = e.target.files||e.dataTransfer.files;
            var file=files[0];
            console.log(file);
            if(file){
                var reader = new FileReader();
                reader.onload=function(){
                    var img=document.createElement("img");
                    img.src=this.result;
                    edit.appendChild(img);
                    //装载图片
                }
                reader.readAsDataURL(file);
            }
            //
        }
        //
    }
    function edit_b(){
        
        var selectionContents = range.extractContents();
        var e = document.createElement("b");
        e.appendChild(selectionContents);
        range.insertNode(e);
    }
    function edit_i(){
        
        var selectionContents = range.extractContents();
        var e = document.createElement("i");
        e.appendChild(selectionContents);
        range.insertNode(e);
    }
    function edit_h1(){
        
        var selectionContents = range.extractContents();
        console.log(selectionContents)
        var e = document.createElement("h1");
        //e.appendChild(keyword);
        e.innerHTML=keyword;
        //range.deleteContents();
        range.insertNode(e);
    }
    function edit_h2(){
        
        var selectionContents = range.extractContents();
        var e = document.createElement("h2");
        e.appendChild(selectionContents);
        range.insertNode(e);
    }
    function b(){
        var range = window.getSelection().getRangeAt(0);
        window.getSelection().getRangeAt(0).cloneContents(); 
        var selectionContents = range.extractContents();//qianqie
        var div = document.createElement("div");
        div.style.color = "yellow";
        div.appendChild(selectionContents);
        range.insertNode(div);
    }
</script>
</body>
</html>